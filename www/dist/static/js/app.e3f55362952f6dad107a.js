webpackJsonp([1],{"44SM":function(t,e){},"6XdX":function(t,e){},Dfct:function(t,e){},H16g:function(t,e){},JTrQ:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"work",attrs:{id:"app"}},[e("h1",{staticClass:"title"},[this._v("KANBAN VUE")]),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var i=s("VU/8")({name:"App",methods:{}},o,!1,function(t){s("H16g")},null,null).exports,a=s("/ocq"),r={name:"Home",data:function(){return{title:{title:""}}},mounted:function(){this.$store.state.user._id||C.push({name:"Login"}),this.$store.dispatch("fetchBoards",this.user)},computed:{user:function(){return this.$store.state.user},boards:function(){return this.$store.state.boards}},methods:{createBoard:function(){this.$store.dispatch("createBoard",this.title),this.title={title:""}},boardPage:function(t){this.$store.commit("setBoard",t),C.push({name:"Board"})},logout:function(){this.$store.dispatch("logout"),C.push({name:"Login"})},deleteBoard:function(t){this.$store.dispatch("deleteBoard",t)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t.user?s("button",{on:{click:t.logout}},[t._v("Logout")]):t._e(),t._v(" "),s("hr"),t._v(" "),s("h1",[t._v("Hello "+t._s(t.user.username))]),t._v(" "),s("hr"),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.createBoard(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title.title,expression:"title.title"}],attrs:{type:"text",name:"title",placeholder:"Board title goes here"},domProps:{value:t.title.title},on:{input:function(e){e.target.composing||t.$set(t.title,"title",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Create new board")])])])]),t._v(" "),s("div",{staticClass:"row justify-content-around"},t._l(t.boards,function(e){return s("div",{staticClass:"boards col-3 ml-2 mr-2 mb-5"},[s("h2",[t._v(t._s(e.title))]),t._v(" "),s("button",{on:{click:function(s){t.boardPage(e)}}},[t._v("Open")]),t._v(" "),s("button",{on:{click:function(s){t.deleteBoard(e)}}},[t._v("Delete")])])}))])},staticRenderFns:[]};var l=s("VU/8")(r,c,!1,function(t){s("ngqU"),s("44SM")},"data-v-cd115c46",null).exports,u={name:"",mounted:function(){this.$store.state.user._id||this.$store.dispatch("authenticate")},data:function(){return{login:{email:"",password:""}}},computed:{},methods:{userLogin:function(){this.$store.dispatch("login",this.login)},switchRegister:function(){C.push({name:"Register"})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-page"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.userLogin(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.email,expression:"login.email"}],attrs:{type:"text",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.login.email},on:{input:function(e){e.target.composing||t.$set(t.login,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("LOGIN")])]),t._v(" "),s("button",{on:{click:t.switchRegister}},[t._v("Not a user? Click here to register")])])},staticRenderFns:[]};var m=s("VU/8")(u,d,!1,function(t){s("XCJj")},null,null).exports,p={name:"register",data:function(){return{register:{username:"",email:"",password:""}}},computed:{},methods:{userRegister:function(){this.$store.dispatch("register",this.register)},switchLogin:function(){C.push({name:"Login"})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.userRegister(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",name:"username",id:"username",placeholder:"username"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.register.email,expression:"register.email"}],attrs:{type:"text",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.register.email},on:{input:function(e){e.target.composing||t.$set(t.register,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.register.password},on:{input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Register")])]),t._v(" "),s("button",{on:{click:t.switchLogin}},[t._v("Already a user? Click here to login!")])])},staticRenderFns:[]};var f=s("VU/8")(p,h,!1,function(t){s("6XdX")},null,null).exports,v={name:"Tasks",data:function(){return{}},props:{list:{type:Array,required:!0}},computed:{},methods:{deleteComment:function(t){this.$store.dispatch("deleteComment",t)}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comments"},[s("ol",t._l(t.list,function(e){return s("li",{staticClass:"comm-bg"},[s("h5",[t._v(t._s(e.body))]),t._v(" "),s("button",{on:{click:function(s){t.deleteComment(e)}}},[t._v("Delete Comment")])])}))])},staticRenderFns:[]};var _={name:"Tasks",data:function(){return{comment:{body:"",parentId:""},selected:""}},components:{comments:s("VU/8")(v,g,!1,function(t){s("gUlw")},null,null).exports},mounted:function(){this.$store.dispatch("fetchComments")},props:{list:{type:Array,required:!0},lists:{type:Array,required:!0}},computed:{comments:function(){return this.$store.state.comments}},methods:{deleteTask:function(t){this.$store.dispatch("deleteTask",t)},createComment:function(t){this.comment.parentId=t._id,this.$store.dispatch("createComment",this.comment),this.comment={body:"",parentId:""}},moveTask:function(t){t.parentId=this.selected,this.$store.dispatch("moveTask",t),this.selected=""}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tasks"},[s("ul",t._l(t.list,function(e){return s("li",{staticClass:"task-bg"},[s("h3",{staticClass:"task-body"},[t._v(t._s(e.body))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?s:s[0]},function(s){t.moveTask(e)}]}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Move to list:")]),t._v(" "),t._l(t.lists,function(n){return e.parentId!=n._id?s("option",{domProps:{value:n._id}},[t._v(t._s(n.title))]):t._e()})],2),t._v(" "),s("button",{on:{click:function(s){t.deleteTask(e)}}},[t._v("Delete this task")]),t._v(" "),t.comments[e._id]?s("div",[s("comments",{attrs:{list:t.comments[e._id]}})],1):t._e(),t._v(" "),s("form",{key:e._id,on:{submit:function(s){s.preventDefault(),t.createComment(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.body,expression:"comment.body"}],attrs:{type:"text",name:"body",placeholder:"Add a comment"},domProps:{value:t.comment.body},on:{input:function(e){e.target.composing||t.$set(t.comment,"body",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Add Comment")])])])}))])},staticRenderFns:[]};var k={name:"Board",components:{tasks:s("VU/8")(_,b,!1,function(t){s("Dfct")},null,null).exports},data:function(){return{list:{title:"",parentId:""},task:{body:"",parentId:""}}},mounted:function(){this.$store.dispatch("fetchLists",this.board._id),this.$store.dispatch("fetchTasks")},computed:{user:function(){return this.$store.state.user},board:function(){return this.$store.state.board},lists:function(){return this.$store.state.lists},taskList:function(){return this.$store.state.taskList}},methods:{pageHome:function(){C.push({name:"Home"})},logout:function(){this.$store.dispatch("logout"),C.push({name:"Login"})},createList:function(){this.list.parentId=this.board._id,this.$store.dispatch("createList",this.list),this.list={title:"",parentId:""}},deleteList:function(t){this.$store.dispatch("deleteList",t)},createTask:function(t){this.task.parentId=t._id,this.$store.dispatch("createTask",this.task),this.task={body:"",parentId:""}}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Board container-fluid"},[s("div",{staticClass:"row d-flex"},[s("div",{staticClass:"col-12 justify-content-between"},[t.user?s("button",{on:{click:t.logout}},[t._v("Logout")]):t._e(),t._v(" "),s("button",{on:{click:t.pageHome}},[t._v("Back to home")])]),t._v(" "),s("div",{staticClass:"col-12 justify-content-center"},[s("h1",{staticClass:"board-title"},[t._v(t._s(t.board.title))]),t._v(" "),s("form",{staticClass:"mb-2",on:{submit:function(e){return e.preventDefault(),t.createList(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.list.title,expression:"list.title"}],attrs:{type:"text",name:"title",placeholder:"Title goes here"},domProps:{value:t.list.title},on:{input:function(e){e.target.composing||t.$set(t.list,"title",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Add list")])])])]),t._v(" "),s("div",{staticClass:"row"},t._l(t.lists[t.board._id],function(e){return s("div",{staticClass:"list col-3 m-1"},[s("h2",{staticClass:"list-title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("form",{key:e._id,staticStyle:{"padding-right":"5px"},on:{submit:function(s){s.preventDefault(),t.createTask(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.body,expression:"task.body"}],attrs:{type:"text",name:"body",placeholder:"Create a task"},domProps:{value:t.task.body},on:{input:function(e){e.target.composing||t.$set(t.task,"body",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Add Task")])]),t._v(" "),s("button",{on:{click:function(s){t.deleteList(e)}}},[t._v("Delete this list")])]),t._v(" "),s("hr"),t._v(" "),t.taskList[e._id]?s("div",[s("tasks",{attrs:{list:t.taskList[e._id],lists:t.lists[t.board._id]}})],1):t._e()])}))])},staticRenderFns:[]};var y=s("VU/8")(k,w,!1,function(t){s("JTrQ")},null,null).exports;n.a.use(a.a);var C=new a.a({routes:[{path:"/Login",name:"Login",component:m},{path:"/",name:"Home",component:l},{path:"/Register",name:"Register",component:f},{path:"/Board",name:"Board",component:y}]}),$=s("NYxO"),L=s("mtWM"),x=s.n(L),T=!window.location.host.includes("localhost")?"//kanban-dock.herokuapp.com/":"//localhost:3000/",B=x.a.create({baseURL:T,timeout:3e3,withCredentials:!0}),I=x.a.create({baseURL:T+"auth/",timeout:3e3,withCredentials:!0});function U(t){for(var e={},s=0;s<t.length;s++){var n=t[s];e[n.parentId]?e[n.parentId].push(n):(e[n.parentId]=[],e[n.parentId].push(n))}return e}n.a.use($.a);var R=new $.a.Store({state:{user:{},boards:[],board:{},lists:{},tasks:[],taskList:{},comments:{}},mutations:{setUser:function(t,e){t.user=e},deleteUser:function(t){t.user={},t.boards=[],t.board={},t.lists={},t.taskList={},t.comments={}},setBoards:function(t,e){t.boards=e},setBoard:function(t,e){t.board=e},setLists:function(t,e){t.lists=U(e),console.log(t.lists)},setTaskList:function(t,e){t.taskList=U(e)},setComments:function(t,e){t.comments=U(e)}},actions:{login:function(t,e){var s=t.commit;t.dispatch;I.post("/login",e).then(function(t){console.log("successfully logged in!"),s("setUser",t.data),C.push({name:"Home"})}).catch(function(t){console.log(t)})},logout:function(t){var e=t.commit;t.dispatch;I.delete("/logout").then(function(t){console.log("Successfully logged out!"),e("deleteUser"),C.push({name:"Login"})}).catch(function(t){console.log(t)})},register:function(t,e){t.commit,t.dispatch;I.post("/register",e).then(function(t){console.log("Registration Successful"),C.push({name:"Login"})}).catch(function(t){console.log(t)})},authenticate:function(t){var e=t.commit;t.dispatch;B.get("/authenticate").then(function(t){e("setUser",t.data),C.push({name:"Home"})}).catch(function(t){console.log(t)})},fetchBoards:function(t,e){var s=t.commit;t.dispatch;B.get("/api/boards",e).then(function(t){s("setBoards",t.data)}).catch(function(t){console.log(t)})},createBoard:function(t,e){t.commit;var s=t.dispatch,n=t.state;B.post("/api/boards",e).then(function(t){s("fetchBoards",n.user)}).catch(function(t){console.log(t)})},deleteBoard:function(t,e){t.commit;var s=t.dispatch,n=t.state;B.delete("/api/boards/"+e._id,e).then(function(t){s("fetchBoards",n.user)}).catch(function(t){console.log(t)})},createList:function(t,e){t.commit;var s=t.dispatch;B.post("/api/lists",e).then(function(t){s("fetchLists",e.parentId)}).catch(function(t){console.log(t)})},fetchLists:function(t,e){var s=t.commit;t.dispatch;B.get("/api/lists").then(function(t){s("setLists",t.data)}).catch(function(t){console.log(t)})},deleteList:function(t,e){t.commit;var s=t.dispatch;B.delete("/api/lists/"+e._id,e).then(function(t){s("fetchLists",e.parentId)}).catch(function(t){console.log(t)})},fetchTasks:function(t){var e=t.commit;t.dispatch;B.get("/api/tasks").then(function(t){e("setTaskList",t.data)}).catch(function(t){console.log(t)})},deleteTask:function(t,e){t.commit;var s=t.dispatch;B.delete("/api/tasks/"+e._id,e).then(function(t){s("fetchTasks",e.parentId)}).catch(function(t){console.log(t)})},createTask:function(t,e){t.commit;var s=t.dispatch;B.post("/api/tasks",e).then(function(t){s("fetchTasks",e.parentId)}).catch(function(t){console.log(t)})},moveTask:function(t,e){var s=t.dispatch;t.commit;B.put("/api/tasks/"+e._id,e).then(function(t){s("fetchTasks",e.parentId)}).catch(function(t){console.log(t)})},fetchComments:function(t){var e=t.commit;t.dispatch;B.get("/api/comments").then(function(t){e("setComments",t.data)}).catch(function(t){console.log(t)})},deleteComment:function(t,e){t.commit;var s=t.dispatch;B.delete("/api/comments/"+e._id,e).then(function(t){s("fetchComments",e.parentId)}).catch(function(t){console.log(t)})},createComment:function(t,e){t.commit;var s=t.dispatch;B.post("/api/comments",e).then(function(t){s("fetchComments",e.parentId)}).catch(function(t){console.log(t)})}}});n.a.config.productionTip=!1,new n.a({el:"#app",router:C,store:R,components:{App:i},template:"<App/>"})},XCJj:function(t,e){},gUlw:function(t,e){},ngqU:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e3f55362952f6dad107a.js.map